{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://pixel-pygame-palace.com/schemas/buildTarget.json",
  "title": "Build Target Schema",
  "description": "Schema for build targets defining platform capabilities",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for the build target",
      "enum": ["desktop", "web", "mobile"]
    },
    "name": {
      "type": "string",
      "description": "Display name of the build target"
    },
    "description": {
      "type": "string",
      "description": "Description of the build target"
    },
    "platform": {
      "type": "object",
      "properties": {
        "os": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["windows", "macos", "linux", "browser", "ios", "android"]
          },
          "description": "Supported operating systems"
        },
        "architecture": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["x86", "x64", "arm", "arm64", "wasm"]
          },
          "description": "Supported CPU architectures"
        },
        "minVersion": {
          "type": "string",
          "description": "Minimum OS version required"
        }
      },
      "required": ["os"],
      "description": "Platform specifications"
    },
    "capabilities": {
      "type": "object",
      "properties": {
        "graphics": {
          "type": "object",
          "properties": {
            "hardware2D": { "type": "boolean", "default": true },
            "hardware3D": { "type": "boolean", "default": false },
            "shaders": { "type": "boolean", "default": false },
            "maxTextureSize": { "type": "integer", "default": 2048 },
            "multipleWindows": { "type": "boolean", "default": false }
          }
        },
        "audio": {
          "type": "object",
          "properties": {
            "stereo": { "type": "boolean", "default": true },
            "surround": { "type": "boolean", "default": false },
            "streaming": { "type": "boolean", "default": true },
            "synthesis": { "type": "boolean", "default": false },
            "formats": {
              "type": "array",
              "items": { "type": "string" },
              "default": ["wav", "mp3", "ogg"]
            }
          }
        },
        "input": {
          "type": "object",
          "properties": {
            "keyboard": { "type": "boolean", "default": true },
            "mouse": { "type": "boolean", "default": true },
            "touch": { "type": "boolean", "default": false },
            "gamepad": { "type": "boolean", "default": false },
            "accelerometer": { "type": "boolean", "default": false },
            "gyroscope": { "type": "boolean", "default": false }
          }
        },
        "storage": {
          "type": "object",
          "properties": {
            "localStorage": { "type": "boolean", "default": true },
            "fileSystem": { "type": "boolean", "default": true },
            "maxLocalStorage": { "type": "integer", "description": "Max storage in MB" },
            "persistent": { "type": "boolean", "default": true }
          }
        },
        "network": {
          "type": "object",
          "properties": {
            "http": { "type": "boolean", "default": true },
            "websockets": { "type": "boolean", "default": false },
            "udp": { "type": "boolean", "default": false },
            "p2p": { "type": "boolean", "default": false }
          }
        },
        "performance": {
          "type": "object",
          "properties": {
            "multithreading": { "type": "boolean", "default": false },
            "webWorkers": { "type": "boolean", "default": false },
            "simd": { "type": "boolean", "default": false },
            "jit": { "type": "boolean", "default": true }
          }
        }
      },
      "description": "Technical capabilities of the build target"
    },
    "constraints": {
      "type": "object",
      "properties": {
        "maxMemoryMB": {
          "type": "integer",
          "description": "Maximum memory usage in MB"
        },
        "maxFileSizeMB": {
          "type": "integer", 
          "description": "Maximum total file size in MB"
        },
        "sandboxed": {
          "type": "boolean",
          "description": "Whether code runs in a restricted environment"
        },
        "requiresPermissions": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Platform permissions required"
        },
        "blockedAPIs": {
          "type": "array",
          "items": { "type": "string" },
          "description": "APIs that are not available"
        }
      },
      "description": "Platform limitations and restrictions"
    },
    "buildSettings": {
      "type": "object",
      "properties": {
        "compiler": {
          "type": "string",
          "description": "Compiler or build tool to use"
        },
        "outputFormat": {
          "type": "string",
          "description": "Output format (exe, app, html, apk, etc.)"
        },
        "optimization": {
          "type": "string",
          "enum": ["none", "size", "speed", "balanced"],
          "default": "balanced",
          "description": "Optimization strategy"
        },
        "compression": {
          "type": "boolean",
          "default": true,
          "description": "Whether to compress output"
        }
      },
      "description": "Build configuration options"
    },
    "runtime": {
      "type": "object",
      "properties": {
        "engine": {
          "type": "string",
          "description": "Runtime engine (pygame, pygame-web, etc.)"
        },
        "version": {
          "type": "string",
          "description": "Runtime version"
        },
        "dependencies": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Required runtime dependencies"
        }
      },
      "description": "Runtime environment specifications"
    },
    "deployment": {
      "type": "object",
      "properties": {
        "distribution": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["direct", "store", "web", "package_manager"]
          },
          "description": "Supported distribution methods"
        },
        "signing": {
          "type": "boolean",
          "description": "Whether code signing is available/required"
        },
        "autoUpdate": {
          "type": "boolean",
          "description": "Whether automatic updates are supported"
        }
      },
      "description": "Deployment options"
    }
  },
  "required": [
    "id",
    "name",
    "description",
    "platform",
    "capabilities"
  ]
}