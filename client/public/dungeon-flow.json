{
  "start": {
    "id": "start",
    "speaker": "Pixel",
    "text": "A DUNGEON CRAWLER awaits! Let's craft your dark adventure with meaningful choices that shape your underground world. First, let's set the atmosphere!",
    "followUp": "Every choice will bundle matching assets and mechanics. Choose your dungeon's atmosphere!",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "dungeonAtmosphere",
      "category": "theme"
    },
    "options": [
      {
        "text": "A: Dark Atmospheric - Gothic horror, torch-lit corridors, ominous shadows",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "dungeonAtmosphere", 
          "variant": "A",
          "bundle": ["dark_bg", "stone_tiles", "horror_music", "torch_system"]
        },
        "next": "projectSetup"
      },
      {
        "text": "B: Bright Adventure - Colorful ruins, magical crystals, heroic exploration",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "dungeonAtmosphere", 
          "variant": "B",
          "bundle": ["bright_bg", "crystal_tiles", "adventure_music", "crystal_light"]
        },
        "next": "projectSetup"
      }
    ]
  },

  "projectSetup": {
    "id": "projectSetup",
    "speaker": "Pixel",
    "text": "Great atmosphere! Now let's name your dungeon crawler. What title will strike fear into adventurers' hearts?",
    "options": [
      {
        "text": "A: Let me type my own game name",
        "action": "promptGameName",
        "next": "dungeonTheme"
      },
      {
        "text": "B: Generate a dark and mysterious name",
        "action": "generateGameName",
        "actionParams": { "gameType": "dungeon" },
        "next": "dungeonTheme"
      }
    ]
  },

  "dungeonTheme": {
    "id": "dungeonTheme",
    "speaker": "Pixel",
    "text": "STAGE 1: Setting! What kind of dungeon are we exploring?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "dungeonType",
      "category": "environment"
    },
    "options": [
      {
        "text": "A: Ancient Ruins - Crumbling stone temples, mystical traps, forgotten treasures",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "dungeonType", 
          "variant": "A",
          "bundle": ["ancient_walls", "rune_doors", "temple_props", "mystical_fx", "sand_particles"]
        },
        "next": "heroClass"
      },
      {
        "text": "B: Haunted Castle - Gothic corridors, ghostly enemies, cursed chambers",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "dungeonType", 
          "variant": "B",
          "bundle": ["castle_walls", "iron_doors", "gothic_props", "ghost_fx", "fog_effects"]
        },
        "next": "heroClass"
      },
      {
        "text": "C: Crystal Caves - Glowing caverns, magical formations, hidden passages",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "dungeonType", 
          "variant": "C",
          "bundle": ["cave_walls", "crystal_formations", "cave_props", "glow_fx", "sparkle_particles"]
        },
        "next": "heroClass"
      }
    ]
  },

  "heroClass": {
    "id": "heroClass",
    "speaker": "Pixel",
    "text": "Choose your hero class! Each comes with unique abilities and playstyle.",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "heroClass",
      "category": "character"
    },
    "options": [
      {
        "text": "A: Knight - Heavy armor, sword & shield, high defense",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "heroClass", 
          "variant": "knight",
          "bundle": ["knight_sprite", "sword_weapon", "shield_ability", "armor_buff", "charge_skill"]
        },
        "next": "titleScreen"
      },
      {
        "text": "B: Archer - Light armor, bow & arrows, ranged attacks",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "heroClass", 
          "variant": "archer",
          "bundle": ["archer_sprite", "bow_weapon", "arrow_types", "dodge_ability", "multishot_skill"]
        },
        "next": "titleScreen"
      },
      {
        "text": "C: Mage - Magic robes, staff, powerful spells",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "heroClass", 
          "variant": "mage",
          "bundle": ["mage_sprite", "staff_weapon", "spell_types", "mana_system", "teleport_skill"]
        },
        "next": "titleScreen"
      }
    ]
  },

  "titleScreen": {
    "id": "titleScreen",
    "speaker": "Pixel",
    "text": "How should your title screen present the dungeon entrance?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "titlePresentation",
      "category": "ui"
    },
    "options": [
      {
        "text": "A: Animated Entrance - Camera descends into dungeon depths",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "titlePresentation", 
          "variant": "A",
          "bundle": ["camera_descent", "depth_fog", "entrance_anim"]
        },
        "next": "menuStyle"
      },
      {
        "text": "B: Static Gate - Imposing dungeon door with ambient effects",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "titlePresentation", 
          "variant": "B",
          "bundle": ["gate_image", "torch_flicker", "ambient_particles"]
        },
        "next": "menuStyle"
      }
    ]
  },

  "menuStyle": {
    "id": "menuStyle",
    "speaker": "Pixel",
    "text": "What style should the main menu have?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "menuDesign",
      "category": "ui"
    },
    "options": [
      {
        "text": "A: Stone Tablet - Carved menu options on ancient stone",
        "action": "selectComponentVariant",
        "actionParams": { "componentId": "menuDesign", "variant": "A" },
        "next": "explorationView"
      },
      {
        "text": "B: Map Interface - Dungeon blueprint with glowing selections",
        "action": "selectComponentVariant",
        "actionParams": { "componentId": "menuDesign", "variant": "B" },
        "next": "explorationView"
      }
    ]
  },

  "explorationView": {
    "id": "explorationView",
    "speaker": "Pixel",
    "text": "STAGE 2: Core Mechanics! How should players view the dungeon?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "cameraView",
      "category": "exploration"
    },
    "options": [
      {
        "text": "A: Top-Down View - Classic dungeon crawler perspective",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "cameraView", 
          "variant": "A",
          "bundle": ["topdown_camera", "room_reveal", "minimap"]
        },
        "next": "movementSystem"
      },
      {
        "text": "B: First-Person View - Immersive corridor exploration",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "cameraView", 
          "variant": "B",
          "bundle": ["fps_camera", "wall_textures", "compass"]
        },
        "next": "movementSystem"
      }
    ]
  },

  "movementSystem": {
    "id": "movementSystem",
    "speaker": "Pixel",
    "text": "How should dungeon movement work?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "movement",
      "category": "exploration"
    },
    "options": [
      {
        "text": "A: Grid-Based - Strategic tile-by-tile movement",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "movement", 
          "variant": "A",
          "bundle": ["grid_movement", "turn_based", "tile_highlight"]
        },
        "next": "combatSystem"
      },
      {
        "text": "B: Free Movement - Smooth real-time exploration",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "movement", 
          "variant": "B",
          "bundle": ["free_movement", "collision", "sprint_system"]
        },
        "next": "proceduralGeneration"
      }
    ]
  },

  "proceduralGeneration": {
    "id": "proceduralGeneration",
    "speaker": "Pixel",
    "text": "How should dungeon layouts be created?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "mapGeneration",
      "category": "world"
    },
    "options": [
      {
        "text": "A: Fully Procedural - Unique dungeon every playthrough with random rooms",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "mapGeneration", 
          "variant": "A",
          "bundle": ["room_generator", "corridor_logic", "random_spawns", "seed_system"]
        },
        "next": "dungeonSize"
      },
      {
        "text": "B: Handcrafted with Variations - Designed rooms with random arrangements",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "mapGeneration", 
          "variant": "B",
          "bundle": ["room_templates", "layout_variations", "secret_rooms", "puzzle_chambers"]
        },
        "next": "dungeonSize"
      }
    ]
  },

  "dungeonSize": {
    "id": "dungeonSize",
    "speaker": "Pixel",
    "text": "What's the scale of your dungeon?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "dungeonScale",
      "category": "world"
    },
    "options": [
      {
        "text": "A: Small & Intense - 5-10 floors, focused experience",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "dungeonScale", 
          "variant": "small",
          "floors": 5
        },
        "next": "combatSystem"
      },
      {
        "text": "B: Medium Adventure - 10-20 floors, balanced challenge",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "dungeonScale", 
          "variant": "medium",
          "floors": 15
        },
        "next": "combatSystem"
      },
      {
        "text": "C: Epic Journey - 20+ floors, marathon dungeon",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "dungeonScale", 
          "variant": "large",
          "floors": 25
        },
        "next": "combatSystem"
      }
    ]
  },

  "combatSystem": {
    "id": "combatSystem",
    "speaker": "Pixel",
    "text": "STAGE 3: Combat! How should battles play out?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "combat",
      "category": "gameplay"
    },
    "options": [
      {
        "text": "A: Real-Time Combat - Hack and slash action",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "combat", 
          "variant": "A",
          "bundle": ["melee_combat", "dodge_roll", "combo_system"]
        },
        "next": "enemyTypes"
      },
      {
        "text": "B: Turn-Based Combat - Strategic tactical battles",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "combat", 
          "variant": "B",
          "bundle": ["turn_combat", "action_points", "skill_menu"]
        },
        "next": "enemyTypes"
      }
    ]
  },

  "enemyTypes": {
    "id": "enemyTypes",
    "speaker": "Pixel",
    "text": "What dangers lurk in the dungeon? Choose your enemy types!",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "enemies",
      "category": "gameplay"
    },
    "options": [
      {
        "text": "A: Classic Monsters - Skeletons, slimes, goblins, dragons",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "enemies", 
          "variant": "A",
          "bundle": ["skeleton_enemy", "slime_enemy", "goblin_enemy", "dragon_boss", "creature_ai"]
        },
        "next": "spawnRates"
      },
      {
        "text": "B: Undead Hordes - Zombies, ghosts, vampires, liches",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "enemies", 
          "variant": "B",
          "bundle": ["zombie_enemy", "ghost_enemy", "vampire_enemy", "lich_boss", "undead_ai"]
        },
        "next": "spawnRates"
      },
      {
        "text": "C: Magical Constructs - Golems, elementals, animated armor",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "enemies", 
          "variant": "C",
          "bundle": ["golem_enemy", "elemental_enemy", "armor_enemy", "construct_boss", "magic_ai"]
        },
        "next": "spawnRates"
      }
    ]
  },

  "spawnRates": {
    "id": "spawnRates",
    "speaker": "Pixel",
    "text": "How often should enemies appear?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "enemySpawns",
      "category": "gameplay"
    },
    "options": [
      {
        "text": "A: Sparse - Fewer but tougher enemies",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "enemySpawns", 
          "variant": "sparse",
          "spawn_rate": 0.3,
          "difficulty_multiplier": 1.5
        },
        "next": "lootSystem"
      },
      {
        "text": "B: Moderate - Balanced enemy encounters",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "enemySpawns", 
          "variant": "moderate",
          "spawn_rate": 0.5,
          "difficulty_multiplier": 1.0
        },
        "next": "lootSystem"
      },
      {
        "text": "C: Dense - Many enemies, swarm tactics",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "enemySpawns", 
          "variant": "dense",
          "spawn_rate": 0.7,
          "difficulty_multiplier": 0.8
        },
        "next": "lootSystem"
      }
    ]
  },

  "lootSystem": {
    "id": "lootSystem",
    "speaker": "Pixel",
    "text": "STAGE 4: Rewards! How should the treasure system work?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "loot",
      "category": "items"
    },
    "options": [
      {
        "text": "A: Random Drops - Procedural loot with rarity tiers",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "loot", 
          "variant": "A",
          "bundle": ["loot_tables", "rarity_colors", "drop_particles", "enchantment_system"]
        },
        "next": "treasureTypes"
      },
      {
        "text": "B: Fixed Treasures - Handcrafted rewards in specific locations",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "loot", 
          "variant": "B",
          "bundle": ["treasure_chests", "key_items", "unique_weapons", "legendary_artifacts"]
        },
        "next": "treasureTypes"
      }
    ]
  },

  "treasureTypes": {
    "id": "treasureTypes",
    "speaker": "Pixel",
    "text": "What types of treasures can be found?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "treasures",
      "category": "items"
    },
    "options": [
      {
        "text": "A: Equipment Focus - Weapons, armor, accessories",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "treasures", 
          "variant": "equipment",
          "bundle": ["weapon_types", "armor_sets", "ring_accessories", "upgrade_materials"]
        },
        "next": "inventoryManagement"
      },
      {
        "text": "B: Consumables Focus - Potions, scrolls, bombs",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "treasures", 
          "variant": "consumables",
          "bundle": ["health_potions", "magic_scrolls", "bomb_types", "buff_items"]
        },
        "next": "inventoryManagement"
      },
      {
        "text": "C: Balanced Mix - All treasure types",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "treasures", 
          "variant": "balanced",
          "bundle": ["all_weapons", "all_armor", "all_consumables", "special_items"]
        },
        "next": "inventoryManagement"
      }
    ]
  },

  "inventoryManagement": {
    "id": "inventoryManagement",
    "speaker": "Pixel",
    "text": "How should players manage their items?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "inventory",
      "category": "items"
    },
    "options": [
      {
        "text": "A: Grid Inventory - Limited space, item tetris management",
        "action": "selectComponentVariant",
        "actionParams": { "componentId": "inventory", "variant": "A" },
        "next": "lightingSystem"
      },
      {
        "text": "B: List Inventory - Categorized items with weight limits",
        "action": "selectComponentVariant",
        "actionParams": { "componentId": "inventory", "variant": "B" },
        "next": "lightingSystem"
      }
    ]
  },

  "lightingSystem": {
    "id": "lightingSystem",
    "speaker": "Pixel",
    "text": "How should darkness and visibility work?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "lighting",
      "category": "world"
    },
    "options": [
      {
        "text": "A: Torch Mechanics - Limited light radius, manage torches",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "lighting", 
          "variant": "A",
          "bundle": ["torch_system", "light_radius", "darkness_fog"]
        },
        "next": "explorationMechanics"
      },
      {
        "text": "B: Always Visible - Full room visibility for strategic play",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "lighting", 
          "variant": "B",
          "bundle": ["full_visibility", "room_lighting", "ambient_glow"]
        },
        "next": "explorationMechanics"
      }
    ]
  },

  "explorationMechanics": {
    "id": "explorationMechanics",
    "speaker": "Pixel",
    "text": "What exploration mechanics should we include?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "exploration",
      "category": "world"
    },
    "options": [
      {
        "text": "A: Map System - Auto-mapping as you explore",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "exploration", 
          "variant": "map",
          "bundle": ["minimap", "room_discovery", "secret_markers", "fog_of_war"]
        },
        "next": "bossEncounter"
      },
      {
        "text": "B: Memory Challenge - No map, rely on memory",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "exploration", 
          "variant": "memory",
          "bundle": ["breadcrumb_trail", "landmark_system", "compass_only"]
        },
        "next": "bossEncounter"
      }
    ]
  },

  "bossEncounter": {
    "id": "bossEncounter",
    "speaker": "Pixel",
    "text": "STAGE 6: Boss Battle! What kind of dungeon lord awaits?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "bossType",
      "category": "boss"
    },
    "options": [
      {
        "text": "A: Dragon Lord - Fire-breathing, flying, treasure hoarder",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "bossType", 
          "variant": "dragon",
          "bundle": ["dragon_boss", "fire_attacks", "flight_phases", "treasure_room"]
        },
        "next": "bossArena"
      },
      {
        "text": "B: Lich King - Undead master, necromancy, minion summoner",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "bossType", 
          "variant": "lich",
          "bundle": ["lich_boss", "death_magic", "summon_undead", "phylactery_mechanic"]
        },
        "next": "bossArena"
      },
      {
        "text": "C: Demon Lord - Multi-phase, elemental attacks, corruption",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "bossType", 
          "variant": "demon",
          "bundle": ["demon_boss", "phase_system", "elemental_attacks", "corruption_aura"]
        },
        "next": "bossArena"
      }
    ]
  },

  "bossArena": {
    "id": "bossArena",
    "speaker": "Pixel",
    "text": "Where should the boss fight take place?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "bossRoom",
      "category": "boss"
    },
    "options": [
      {
        "text": "A: Grand Chamber - Large arena with pillars and platforms",
        "action": "selectComponentVariant",
        "actionParams": { "componentId": "bossRoom", "variant": "A" },
        "next": "deathMechanics"
      },
      {
        "text": "B: Narrow Corridor - Claustrophobic chase sequence",
        "action": "selectComponentVariant",
        "actionParams": { "componentId": "bossRoom", "variant": "B" },
        "next": "deathMechanics"
      }
    ]
  },

  "deathMechanics": {
    "id": "deathMechanics",
    "speaker": "Pixel",
    "text": "STAGE 7: Challenge! What happens when the hero falls?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "deathSystem",
      "category": "gameplay"
    },
    "options": [
      {
        "text": "A: Permadeath - One life, high stakes, roguelike tension",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "deathSystem", 
          "variant": "A",
          "bundle": ["permadeath", "meta_progression", "death_stats"]
        },
        "next": "endGame"
      },
      {
        "text": "B: Checkpoints - Respawn at campfires and save points",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "deathSystem", 
          "variant": "B",
          "bundle": ["checkpoint_system", "campfire_saves", "respawn_fx"]
        },
        "next": "endGame"
      }
    ]
  },

  "endGame": {
    "id": "endGame",
    "speaker": "Pixel",
    "text": "STAGE 8: Victory! How should the adventure conclude?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "ending",
      "category": "finale"
    },
    "options": [
      {
        "text": "A: Escape Sequence - Timer countdown, collapsing dungeon",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "ending", 
          "variant": "A",
          "bundle": ["escape_timer", "falling_debris", "urgent_music"]
        },
        "next": "victoryScreen"
      },
      {
        "text": "B: Treasure Chamber - Claim the ultimate prize peacefully",
        "action": "selectComponentVariant",
        "actionParams": { 
          "componentId": "ending", 
          "variant": "B",
          "bundle": ["treasure_room", "gold_piles", "victory_fanfare"]
        },
        "next": "victoryScreen"
      }
    ]
  },

  "victoryScreen": {
    "id": "victoryScreen",
    "speaker": "Pixel",
    "text": "How should we celebrate the hero's triumph?",
    "action": "showComponentChoice",
    "actionParams": {
      "componentId": "victory",
      "category": "finale"
    },
    "options": [
      {
        "text": "A: Stats Summary - Show floors cleared, treasures found, enemies defeated",
        "action": "selectComponentVariant",
        "actionParams": { "componentId": "victory", "variant": "A" },
        "next": "complete"
      },
      {
        "text": "B: Cinematic Ending - Hero emerges into sunlight with treasure",
        "action": "selectComponentVariant",
        "actionParams": { "componentId": "victory", "variant": "B" },
        "next": "complete"
      }
    ]
  },

  "complete": {
    "id": "complete",
    "speaker": "Pixel",
    "text": "⚔️ LEGENDARY! Your dungeon crawler is complete with all 8 stages perfectly crafted!",
    "followUp": "Theme ✓ Hero Class ✓ Procedural Gen ✓ Combat ✓ Enemies ✓ Loot ✓ Exploration ✓ Boss ✓ Victory ✓ Every choice shapes your unique dungeon adventure!",
    "action": "compileFullGame",
    "options": [
      {
        "text": "Enter the dungeon!",
        "action": "launchPyodideGame"
      },
      {
        "text": "Export as Python file",
        "action": "exportPyodideGame"
      },
      {
        "text": "Open in Pro Editor",
        "action": "openWYSIWYGEditor"
      }
    ]
  }
}